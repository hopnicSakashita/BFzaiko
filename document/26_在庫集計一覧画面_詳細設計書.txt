====================================================================
在庫管理システム - 在庫集計一覧画面 詳細設計書
====================================================================

■ 1. 画面概要
====================================================================
【画面名】
　在庫集計一覧画面

【画面目的】
　製品IDとランクで在庫データを検索し、
　製品ごとの在庫件数と在庫残数の集計結果を一覧表示する。

【アクセス情報】
　- URL: /common/stock_summary
　- 認証: 必須（ログイン必須）

■ 2. 画面レイアウト
====================================================================
【2.1 画面構造】
```
├── base.html（共通テンプレート）
│   ├── ヘッダー（ナビゲーション）
│   ├── サイドメニュー
│   └── メインコンテンツエリア
│       └── common_stock_summary.html
│           ├── ページタイトル「在庫集計一覧」
│           ├── 検索条件セクション
│           ├── 検索結果セクション
│           └── 集計サマリーセクション
```

【2.2 検索条件セクション】
```
┌─────────────────────────────────────────────────────┐
│ 検索条件                                            │
├─────────────────┬─────────────────┬─────────────────┤
│ 製品ID          │ ランク          │                 │
│ [___________]   │ [▼すべて____]   │ [検索] [クリア] │
└─────────────────┴─────────────────┴─────────────────┘
```

【2.3 検索結果セクション】
```
┌────┬────┬────┬────┬────┬────┐
│製品│製品│ﾗﾝｸ │在庫│在庫│操作│
│ID  │名  │    │件数│残数│    │
├────┼────┼────┼────┼────┼────┤
│P01 │AAA │A   │10  │100 │詳細│
│P02 │BBB │B   │20  │200 │詳細│
└────┴────┴────┴────┴────┴────┘
```

【2.4 集計サマリーセクション】
```
┌─────────────────────────────────────────────────────┐
│ 集計サマリー                                        │
├─────────────┬─────────────────┬─────────────────────┤
│ 総製品数:   │ 総在庫件数:     │ 総在庫残数:         │
│ [10]        │ [100]           │ [1,000]            │
└─────────────┴─────────────────┴─────────────────────┘
```

■ 3. 機能詳細
====================================================================
【3.1 検索機能】
　- 製品ID指定検索（英数字のみ入力可）
　- ランク指定検索（KBN_MSTから選択）
　- 検索条件クリア機能

【3.2 表示機能】
　- 検索結果一覧表示
　- 集計サマリー情報の表示
　- 在庫詳細画面への遷移機能

■ 4. データ項目
====================================================================
【4.1 検索条件項目】

◆ 製品ID (prd_id)
　- 入力方式: テキスト入力フィールド
　- 入力制限: 英数字のみ
　- 必須/任意: 任意

◆ ランク (rank)
　- 入力方式: セレクトボックス
　- データソース: KBN_MST（KBN_NO, KBN_NM）
　- 必須/任意: 任意
　- 初期値: すべて

【4.2 一覧表示項目】

◆ 製品ID (CPDD_PRD_ID)
　- 表示形式: テキスト（強調表示）
　- 未設定時: 空文字

◆ 製品名 (PRD_DSP_NM)
　- 表示形式: テキスト
　- 未設定時: "－"

◆ ランク (RANK_NAME, CPDD_RANK)
　- 表示形式: バッジ（info）
　- 未設定時: "－"

◆ 在庫件数 (STOCK_COUNT)
　- 表示形式: バッジ（secondary）
　- 未設定時: 0

◆ 在庫残数合計 (TOTAL_ZAIKO_ZAN)
　- 表示形式: バッジ（条件付き色分け）
　- 色分け条件:
　　- success: 在庫残数 > 0
　　- warning: 在庫残数 = 0
　　- danger: 在庫残数 < 0
　- 未設定時: 0

【4.3 集計サマリー項目】

◆ 総製品数
　- 計算方法: 検索結果の件数
　- 表示形式: バッジ（info）

◆ 総在庫件数
　- 計算方法: STOCK_COUNTの合計
　- 表示形式: バッジ（secondary）

◆ 総在庫残数
　- 計算方法: TOTAL_ZAIKO_ZANの合計
　- 表示形式: バッジ（success）

■ 5. イベント処理
====================================================================
【5.1 入力制御】
　- 製品ID入力時の英数字チェック（即時バリデーション）

【5.2 画面遷移】
　- 詳細ボタンクリック時: 在庫詳細画面へ遷移
　　（パラメータ: prd_id, rank）

■ 6. エラーハンドリング
====================================================================
【6.1 検索エラー】
　- 検索結果なし: 「検索条件に一致するデータが見つかりませんでした。」
　- 未検索時: 「検索条件を入力して「検索」ボタンをクリックしてください。」 