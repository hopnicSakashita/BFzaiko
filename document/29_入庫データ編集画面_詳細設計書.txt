====================================================================
在庫管理システム - 入庫データ編集画面 詳細設計書
====================================================================

■ 1. 画面概要
====================================================================
【画面名】
　入庫データ編集画面

【画面目的】
　既存の入庫データを編集し、
　製品の入庫情報を更新する。

【アクセス情報】
　- URL: /common/cprd_dat_edit/<入庫ID>
　- 認証: 必須（ログイン必須）

■ 2. 画面レイアウト
====================================================================
【2.1 画面構造】
```
├── base.html（共通テンプレート）
│   ├── ヘッダー（ナビゲーション）
│   ├── サイドメニュー
│   └── メインコンテンツエリア
│       └── cprd_dat_edit.html
│           ├── ページタイトル「入庫データ編集」
│           ├── 戻るボタン
│           ├── 編集フォーム
│           └── 現在の値表示
```

【2.2 編集フォーム】
```
┌─────────────────────────────────────────────────────┐
│ 入庫データ編集 (ID: xxx)                           │
├─────────────────────────────────────────────────────┤
│ ・製品ID *                                         │
│   - セレクトボックスまたはテキスト入力            │
│   - 5文字以内                                      │
│                                                     │
│ ・LOT *                                            │
│   - 数値入力（0-999999）                           │
│                                                     │
│ ・分割番号1                                        │
│   - 数値入力（0-99）                               │
│   - 任意入力（未入力時は0）                        │
│                                                     │
│ ・分割番号2                                        │
│   - 数値入力（0-99）                               │
│   - 任意入力（未入力時は0）                        │
│                                                     │
│ ・ランク *                                         │
│   - セレクトボックス                               │
│                                                     │
│ ・数量 *                                           │
│   - 数値入力（0-99999）                            │
│                                                     │
│ ・フラグ情報                                       │
│   - 現在のフラグ値を表示                          │
│   - フラグ0以外は編集不可                         │
│                                                     │
│ [キャンセル] [元に戻す] [更新]                     │
└─────────────────────────────────────────────────────┘
```

【2.3 現在の値表示】
```
┌─────────────────────────────────────────────────────┐
│ 現在の値                                           │
├─────────────────────────────────────────────────────┤
│ 入庫ID  製品ID  LOT  分割1  分割2  ランク         │
│ 数量    フラグ                                     │
└─────────────────────────────────────────────────────┘
```

■ 3. 機能詳細
====================================================================
【3.1 表示機能】
1. 製品ID入力
   - 製品マスタ存在時：セレクトボックス表示
     - 表示形式：製品ID - 製品表示名（または製品名）
   - 製品マスタ未存在時：テキスト入力フィールド表示
   - フラグ0以外は編集不可（disabled/readonly）

2. ランク選択
   - 区分マスタから取得したランク一覧を表示
   - 表示形式：区分番号 - 区分名
   - フラグ0以外は編集不可（disabled）

3. フラグ情報表示
   - フラグ0：編集可能（青色表示）
   - フラグ0以外：編集不可（黄色警告表示）

4. 現在の値表示
   - 全項目の現在値を表形式で表示
   - 未設定項目は「－」で表示

【3.2 入力機能】
1. 必須入力項目
   - 製品ID（5文字以内）
   - LOT（0-999999）
   - ランク（選択式）
   - 数量（0-99999）

2. 任意入力項目
   - 分割番号1（0-99）
   - 分割番号2（0-99）

【3.3 入力制御】
1. 編集可否制御
   - フラグ0の場合のみ編集可能
   - フラグ0以外の場合は全項目編集不可

2. 入力値制限
   - 製品ID：最大5文字
   - LOT：0-999999
   - 分割番号：0-99
   - 数量：0-99999

【3.4 ボタン操作】
1. 更新ボタン
   - フラグ0の場合のみ有効
   - 入力値の検証実行
   - 確認ダイアログ表示
   - 更新処理実行

2. 元に戻すボタン
   - フラグ0の場合のみ有効
   - 編集前の値に復元

3. キャンセルボタン
   - 一覧画面に戻る

■ 4. エラー処理
====================================================================
【4.1 入力チェックエラー】
1. 必須項目未入力
   - 製品ID未入力
   - LOT未入力
   - ランク未選択
   - 数量未入力

2. 形式チェック
   - 製品ID：5文字超過
   - LOT：範囲外（0-999999）
   - 分割番号：範囲外（0-99）
   - 数量：範囲外（0-99999）

【4.2 エラーメッセージ】
1. アラート表示
   - 各項目のエラー内容を具体的に表示
   - 日本語でわかりやすく表示

2. フラグエラー
   - フラグ0以外での編集試行時にエラーメッセージ表示

■ 5. イベント処理
====================================================================
【5.1 画面表示時】
1. 初期データ読み込み
   - 入庫データの取得
   - フラグによる編集可否の制御
   - 各項目の初期値設定

【5.2 更新時の処理】
1. 入力値の最終チェック
   - 全必須項目の入力確認
   - 各項目の形式チェック
   - エラー時はアラート表示

2. フラグチェック
   - フラグ0以外の場合は更新不可

3. 確認ダイアログ
   - 更新前に確認メッセージを表示

4. 更新実行
   - 確認後、更新処理を実行
   - キャンセル時は処理中断

【5.3 元に戻す処理】
1. 初期値の保持
   - 画面表示時の値を保持
   - 元に戻すボタンクリックで復元 